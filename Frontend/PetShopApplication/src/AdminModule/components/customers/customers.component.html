<div class="container">
  <h2>Customer Management</h2>

  <!-- Search Bar -->
  <div class="search-container">
    <div class="form-inline">
      <select class="form-control mr-2" [(ngModel)]="searchType">
        <option value="name">Search by Name</option>
        <option value="city">Search by City</option>
        <option value="state">Search by State</option>
        <option value="transactionStatus">Search by Transaction Status</option>
        <option value="noTransactions">Customers Without Transactions</option>
      </select>

      <div *ngIf="searchType === 'name'" class="d-inline-flex">
        <input
          type="text"
          class="form-control mr-2"
          placeholder="First Name"
          [(ngModel)]="searchParams.firstName"
        />
        <input
          type="text"
          class="form-control mr-2"
          placeholder="Last Name"
          [(ngModel)]="searchParams.lastName"
        />
        <button class="btn btn-primary" (click)="searchByName()">Search</button>
      </div>

      <div *ngIf="searchType === 'city'" class="d-inline-flex">
        <input
          type="text"
          class="form-control mr-2"
          placeholder="City"
          [(ngModel)]="searchParams.city"
        />
        <button class="btn btn-primary" (click)="searchByCity()">Search</button>
      </div>

      <div *ngIf="searchType === 'state'" class="d-inline-flex">
        <input
          type="text"
          class="form-control mr-2"
          placeholder="State"
          [(ngModel)]="searchParams.state"
        />
        <button class="btn btn-primary" (click)="searchByState()">Search</button>
      </div>

      <div *ngIf="searchType === 'transactionStatus'" class="d-inline-flex">
        <input
          type="text"
          class="form-control mr-2"
          placeholder="Transaction Status"
          [(ngModel)]="searchParams.status"
        />
        <button class="btn btn-primary" (click)="searchByTransactionStatus()">Search</button>
      </div>

      <div *ngIf="searchType === 'noTransactions'" class="d-inline-flex">
        <button class="btn btn-primary" (click)="searchCustomersWithoutTransactions()">
          Search Customers Without Transactions
        </button>
      </div>
    </div>
  </div>

  <button class="btn btn-primary mt-3" (click)="showAddCustomerForm = !showAddCustomerForm">
    {{ showAddCustomerForm ? 'Hide Add Customer' : 'Add Customer' }}
  </button>

  <!-- Add Customer Form -->
  <div *ngIf="showAddCustomerForm">
    <form (ngSubmit)="addCustomer(newCustomerForm.value)" #newCustomerForm="ngForm">
      <div class="form-group">
        <label for="firstName">First Name:</label>
        <input
          type="text"
          id="firstName"
          class="form-control"
          name="firstName"
          [(ngModel)]="newCustomer.firstName"
          required
        />
      </div>
      <div class="form-group">
        <label for="lastName">Last Name:</label>
        <input
          type="text"
          id="lastName"
          class="form-control"
          name="lastName"
          [(ngModel)]="newCustomer.lastName"
          required
        />
      </div>
      <div class="form-group">
        <label for="email">Email:</label>
        <input
          type="email"
          id="email"
          class="form-control"
          name="email"
          [(ngModel)]="newCustomer.email"
          required
        />
      </div>
      <div class="form-group">
        <label for="phoneNumber">Phone Number:</label>
        <input
          type="text"
          id="phoneNumber"
          class="form-control"
          name="phoneNumber"
          [(ngModel)]="newCustomer.phoneNumber"
          required
        />
      </div>
      <button type="submit" class="btn btn-primary">Add Customer</button>
    </form>
  </div>

  <!-- Customer Table -->
  <table class="table mt-4">
    <thead>
      <tr>
        <th>ID</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let customer of customers">
        <td>{{ customer.customerId }}</td>
        <td>{{ customer.firstName }}</td>
        <td>{{ customer.lastName }}</td>
        <td>{{ customer.email }}</td>
        <td>{{ customer.phoneNumber }}</td>
        <td>
          <button class="btn btn-success" (click)="editCustomer = customer; showEditCustomerForm = true">
            Edit
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
