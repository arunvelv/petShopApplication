<div class="container mt-4">
  <h1>Supplier Management</h1>

  <div class="running-message text-center mb-3">
    <span>To change the address of the customers, <a href="address">click here</a> Note the address ID and change in the address page</span>
  </div>

  <div class="text-center">
    <button class="btn btn-outline-success mb-3" (click)="toggleAddSupplierForm()">Add Supplier</button>
  </div>

  <div *ngIf="showAddSupplierForm" class="card p-4 my-4 mx-auto" style="max-width: 800px;">
  <form (ngSubmit)="addSupplier()"  class="mb-4">
    <div class="row">
      <div class="col-md-3">
        <input
          type="text"
          class="form-control"
          placeholder="Supplier Name"
          [(ngModel)]="newSupplier.name"
          name="name"
          required
        />
      </div>
      <div class="col-md-3">
        <input
          type="text"
          class="form-control"
          placeholder="Contact Person"
          [(ngModel)]="newSupplier.contactPerson"
          name="contactPerson"
          required
        />
      </div>
      <div class="col-md-2">
        <input
          type="text"
          class="form-control"
          placeholder="Phone Number"
          [(ngModel)]="newSupplier.phoneNumber"
          name="phoneNumber"
          required
        />
      </div>
      <div class="col-md-3">
        <input
          type="email"
          class="form-control"
          placeholder="Email"
          [(ngModel)]="newSupplier.email"
          name="email"
          required
        />
      </div>
    </div>
    <div class="row mt-2">
      <div class="col-md-3">
        <input
          type="text"
          class="form-control"
          placeholder="Street"
          [(ngModel)]="newSupplier.address.street"
          name="street"
          required
        />
      </div>
      <div class="col-md-2">
        <input
          type="text"
          class="form-control"
          placeholder="City"
          [(ngModel)]="newSupplier.address.city"
          name="city"
          required
        />
      </div>
      <div class="col-md-2">
        <input
          type="text"
          class="form-control"
          placeholder="State"
          [(ngModel)]="newSupplier.address.state"
          name="state"
          required
        />
      </div>
      <div class="col-md-2">
        <input
          type="text"
          class="form-control"
          placeholder="Zip Code"
          [(ngModel)]="newSupplier.address.zipCode"
          name="zipCode"
          required
        />
      </div>
      <div class="col-md-2">
        <button type="submit" class="btn btn-primary btn-block">
          Add Supplier
        </button>
      </div>
    </div>
    </form>
    </div>

  <!-- Suppliers Table -->
  <div *ngIf="suppliers.length">
  <table class="table table-striped mt-4">
    <thead>
      <tr>
        <th>Name</th>
        <th>Contact Person</th>
        <th>Phone</th>
        <th>Email</th>
        <th>Address</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let supplier of suppliers; let i = index">
        <td>
          <input
            *ngIf="editSupplierIndex === i"
            [(ngModel)]="supplier.name"
            class="form-control"
          />
          <span *ngIf="editSupplierIndex !== i">{{ supplier.name }}</span>
        </td>
        <td>
          <input
            *ngIf="editSupplierIndex === i"
            [(ngModel)]="supplier.contactPerson"
            class="form-control"
          />
          <span *ngIf="editSupplierIndex !== i">{{ supplier.contactPerson }}</span>
        </td>
        <td>
          <input
            *ngIf="editSupplierIndex === i"
            [(ngModel)]="supplier.phoneNumber"
            class="form-control"
          />
          <span *ngIf="editSupplierIndex !== i">{{ supplier.phoneNumber }}</span>
        </td>
        <td>
          <input
            *ngIf="editSupplierIndex === i"
            [(ngModel)]="supplier.email"
            class="form-control"
          />
          <span *ngIf="editSupplierIndex !== i">{{ supplier.email }}</span>
        </td>
        <td>
          {{ supplier.address.street }}, {{ supplier.address.city }}, {{ supplier.address.state }}, {{ supplier.address.zipCode }}
        </td>
        <td>
          <button *ngIf="editSupplierIndex !== i" class="btn btn-warning btn-sm" (click)="editSupplier(i)">Edit</button>
          <button *ngIf="editSupplierIndex === i" class="btn btn-success btn-sm" (click)="saveSupplier(i)">Save</button>
          <button *ngIf="editSupplierIndex === i" class="btn btn-secondary btn-sm" (click)="cancelEdit()">Cancel</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
